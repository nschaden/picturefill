/*! Picturefill | Author: Nick Schaden, 2014 | Original Author: Scott Jehl, Filament Group, 2012, Additional Credit: Tyson Matanich, 2012 | License: MIT/GPLv2 */
(function(b,e){if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(typeof String.prototype.endsWith!=="function"){String.prototype.endsWith=function(f){return this.indexOf(f,this.length-f.length)!==-1}}b._matchesMedia=function(f){return b.matchMedia&&b.matchMedia(f).matches};b._getDpr=function(){return(b.devicePixelRatio||1)};var d;b._getCachedLengthEl=function(){d=d||e.createElement("div");if(!e.body){return}e.body.appendChild(d);return d};b._getWidthFromLength=function(f){var g=b._getCachedLengthEl();g.style.cssText="width: "+f+";";return g.offsetWidth};b._findWidthFromSourceSize=function(o){var n=o.trim().split(/\s*,\s*/);var p;for(var j=0,m=n.length;j<m;j++){var f=n[j];var k=/(\([^)]+\))?\s*([^\s]+)/g.exec(f);if(!k){continue}var h=k[2];var g;if(!k[1]){p=h;break}else{g=k[1]}if(b._matchesMedia(g)){p=h;break}}if(!p){return 300}var l=b._getWidthFromLength(p);return l};b._getCandidatesFromSourceSet=function(h,r){var l=h.trim().split(/\s*,\s*/);var p=[];var j;if(r){j=b._findWidthFromSourceSize(r)}for(var k=0,m=l.length;k<m;k++){var q=l[k];var o=q.split(/\s+/);var n=o[1];var g;if(n&&(n.slice(-1)==="w"||n.slice(-1)==="x")){n=n.slice(0,-1)}if(r){g=parseFloat((parseInt(n,10)/j).toFixed(2))}else{g=n?parseFloat(n,10):b._getDpr()}var f={url:o[0],resolution:g};p.push(f)}return p};var a=function(g,f){return g.resolution>f.resolution};b.picturefill=function(p){var g=e.getElementsByTagName("picture");for(var m=0,j=g.length;m<j;m++){var l=g[m];b.picturefill.resolvePicture(l,p)}var n=e.getElementsByTagName("img");for(var o=0,f=n.length;o<f;o++){var k=n[o];if(!k.hasAttribute("data-picture-src")||k.parentNode.nodeName==="PICTURE"||k.parentNode.nodeName==="SOURCE"){continue}if(!p&&k.hasAttribute("data-picture-evaluated")){continue}k.setAttribute("data-picture-evaluated",true);k.src=k.getAttribute("data-picture-src")}};b.picturefill.resolvePicture=function(p,l){if(!l&&p.hasAttribute("data-picture-evaluated")){return}p.setAttribute("data-picture-evaluated",true);var h=[];var q=p.getElementsByTagName("video");if(q.length>0){var y=q[0];var r=y.getElementsByTagName("source");while(r.length>0){p.appendChild(r[0])}y.parentNode.removeChild(y)}var g=p.getElementsByTagName("source");for(var w=0,z=g.length;w<z;w++){var t=g[w];var n=t.getAttribute("media");if(!t.hasAttribute("srcset")){continue}if(!n||b._matchesMedia(n)){h.push(t)}}var s=p.getElementsByTagName("img")[0];if(h.length){var u=h.pop();if(!s||s.parentNode.nodeName==="NOSCRIPT"){s=e.createElement("img");if(p.hasAttribute("alt")){s.alt=p.getAttribute("alt")}if(p.hasAttribute("title")){s.title=p.getAttribute("title")}}var x=u.getAttribute("srcset");var i;if(u.hasAttribute("sizes")){var f=u.getAttribute("sizes");i=b._getCandidatesFromSourceSet(x,f)}else{i=b._getCandidatesFromSourceSet(x)}var m=i.sort(a);for(var v=0;v<m.length;v++){var o=m[v];if(o.resolution>=b._getDpr()){if(!s.src.endsWith(o.url)){s.src=o.url}break}}if(!s.src&&s.hasAttribute("data-picture-src")){s.src=s.getAttribute("data-picture-src")}u.appendChild(s)}};b.picturefill.resolveLast=function(){var f=e.getElementsByTagName("picture");for(var g=f.length-1;g>=0;g--){if(f[g].getAttribute("data-picture-evaluated")===null&&f[g].getAttribute("data-defer")===null){b.picturefill.resolvePicture(f[g]);break}}};var c=function(){b.picturefill();var f=setInterval(function(){b.picturefill();if(/^loaded|^i|^c/.test(e.readyState)){clearInterval(f);return}},250);b.addEventListener("resize",function(){b.picturefill(true)},false)};c()}(this,this.document));